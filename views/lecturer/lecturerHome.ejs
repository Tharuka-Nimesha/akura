<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Home</title>
        <!-- Bootstrap -->
            <!-- Responsive screen size -->
                <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=yes">
            <!-- End of responsive screen size -->
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
            <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
            
        <!-- End of Bootstrap -->
            <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,500,700,900" rel="stylesheet">
    <!-- Simple line Icon -->
        <link rel="stylesheet" type="text/css" href="../stylesheets/home.css">  
        <script src="../scripts/lecturerHome.js"></script>
    <!-- Particles -->
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
        
        <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

        <script>
            particlesJS.load('particles-js', '../json/particles.json')
        </script>
    <!-- End of Particles -->    
    
        <script src= "https://cdn.zingchart.com/zingchart.min.js"></script>
        <script src= "https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
		<script> 
		    zingchart.MODULESDIR = "https://cdn.zingchart.com/modules/";
		    ZC.LICENSE = ["569d52cefae586f634c54f86dc99e6a9","ee6b7db5b51705a13dc2339db3edaf6d"];
		    
		</script>
    </head>
<body>
    <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="/"><img id="AkuraBrand"src="https://i.imgur.com/GwaGx2B.png" ></a>
  
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
        <a> </a>
    </ul>
    
    <ul class="nav navbar-nav navbar-right">
           <% if(!currentUser){ %>
    <a  id="register"href="/login">
      <button class="custombtn btn btn-outline-primary btn-sm" type="submit">Log In</span></button>
    </a>
   <% } else { %>
    <ul class="navbar-nav nav-link">
        <a class="links"  href="/lecturer/profile">
          <%=currentUser.username%> 
          <img src="../images/users/<%=currentUser.username%>.jpg" class="rounded-circle border user-image" alt="profile-image" id="img">
        </a>
    </ul>
    <ul class="navbar-nav nav-link">
        <a  id="register"href="/logout">
          <button class="btn btn-outline-primary btn-sm custombtn" type="submit">Logout</button>
        </a>
    </ul>
    <% } %>
  </div>
</nav>
<div id="particles-js">
    <div id="overlay"  style="width:100%">
    <h2 id="topic" style="margin-bottom:10px"></h2>
    <!--============================= DETAIL =============================-->
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-4 col-md-5 responsive-wrap">
                    <div class="row">
                        <div class="col-lg-11 featured-responsive c2" style=" margin: 0 auto;">
                            <div class="featured-place-wrap">
                                <a href="/lecturer/income">
                                    <div class="image" style="height:135px;">
                                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS2dQmm_DJztz3W7e8cWJcBB0C89EJnjxudW0G8HNXS9fP37Cri" class="img-fluid"  style="position: relative; top:-35px" alt="#" id="img">
                                    </div>
                                    <span class="featured-rating-green"><i class="fas fa-money-bill-alt"></i></span>
                                    <div class="featured-title-box"  style="height:130px;">
                                        <h6>Income</h6>
                                        <p>Check your monthly income </p>
                                        <div class="bottom-icons">
                                            <div class="closed-now">Click Here to View Your Income</div>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>    
                    </div>
                    <div class="row">
                        <div class="col-lg-11 featured-responsive c2" style=" margin: 0 auto;" data-toggle="modal" data-target="#classes">
                            <div class="featured-place-wrap">
                                <a href="#">
                                    <div class="image" style="height:135px;">
                                        <img src="https://us.123rf.com/450wm/prapassp/prapassp1711/prapassp171100019/90328125-the-science-professor-writes-on-the-board-while-having-a-blackboard-and-a-blackboard-.jpg?ver=6" class="img-fluid"  style="position: relative; top:-10px" alt="#">
                                    </div>
                                    <span class="featured-rating-yellow"><i class="fas fa-book-open"></i></span>
                                    <div class="featured-title-box"  style="height:130px;">
                                        <h6>My Classes</h6>
                                        <% for(var i=0; i<myself.length; i++){ %>
                                            <p>A/L Year <%= myself[i].year %></p> <span>â€¢ </span>
                                        <% } %>
                                        <div class="bottom-icons">
                                            <div class="closed-now">Click Here to Check Your Classes</div>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-8 col-md-7 responsive-wrap">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="panel panel-default panel-fill">
                                <div class="panel-body clck">
                                    <h1>Your next class is in</h1>
                                    <div class="row class-details">
                                        <div class="col-lg-6">
                                            <div id="clockdiv">
                                              <div>
                                                <span class="days"></span>
                                                <div class="smalltext">Days</div>
                                              </div>
                                              <div>
                                                <span class="hours"></span>
                                                <div class="smalltext">Hours</div>
                                              </div>
                                              <div>
                                                <span class="minutes"></span>
                                                <div class="smalltext">Minutes</div>
                                              </div>
                                              <div>
                                                <span class="seconds"></span>
                                                <div class="smalltext">Seconds</div>
                                              </div>
                                            </div>
                                        </div>
                                        <div class="col-lg-6">
                                            <ol class="inner-details-ol"></ol>
                                                <li class="inner-details-li" style="margin-bottom:30px">Class : <span id="cls"></li>
                                                <li class="inner-details-li">Hall  : <span id="hall"></li>
                                            </ol>  
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12" style="margin: 0 auto;">
                            <div class="panel panel-default panel-fill"> 
                                <div class="panel-body" style="background-color:rgba(0,0,0,0.5); border-radius: 5px; margin-bottom:30px;">
                                    <div class="row">
                                        <div class="col-lg-12 col-12 comment-main rounded">
                                            <ul class="p-0">
                                                <% for(var i=0; i<posts.length; i++) { %>
                                                    <li>
                                                        <a href="/lecturer/news">
                                                            <div class="row comment-box p-1 pt-3 pr-4">
                                                                <div class="col-lg-1 col-3 user-img text-center">
                                                                    <img src="/../images/users/admin.png" style="margin-left:10px;" class="main-cmt-img">
                                                                </div>
                                                                <div class="col-lg-11 col-9 user-comment bg-light rounded pb-1">
                                                                    <div class="row">
                                                                        <div class="col-lg-12 col-12 border-bottom pr-0">
                                                                            <h6 style="padding-top:5px; font-size:15px; font-weight:500; color:black"><%=posts[i].title%></h6>
                                                                            <p class="w-100 m-0 font-black"><%=posts[i].content%></p>
                                                                        </div>
                                                                    </div> 
                                                                    <div class="user-comment-desc p-1 pl-2" style="height:25px">
                                                                        <p class="m-0 mr-2" style="font-size:12px">Posted <%=moment(posts[i].created).format('MMMM Do YYYY, h:mm:ss a');%> by Admin</p>                      
                                                                    </div>    
                                                                </div>
                                                            </div>
                                                        </a>
                                                    </li>
                                                    <% if(i==1) break %>
                                                <% } %>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>    
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>       

<div class="modal fade" id="classes" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title" id="exampleModalLabel">Select Class</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true" style="color:white;">&times;</span>
                </button>
            </div>
    
            <div class="modal-body">
                <div class="container-fluid">
                    <div class="row" style="margin-top:20px;">
                        <% for(var i=0; i<myself.length; i++){ %>
                            <div class="col-lg-6 col-md-6 featured-responsive c2">
                                <div class="featured-place-wrap"  data-toggle="modal" data-target="#classesMenu">
                                    <a href="#" class="class-btn" onclick="getClass(this)" id="<%= myself[i].subID%>">
                                        <div class="image">
                                            <img src="../images/subjects/maths<%= i%3 %>.jpg" style="height:100%" class="img-fluid" alt="#">
                                        </div>
                                        <div class="featured-title-box inner-title">
                                            <h6 style="margin:-10px"><%= myself[i].year+" - "+myself[i].subname%></h6>
                                            <div class="bottom-icons">
                                                <div class="closed-now">Click Here to Go to The Menu</div>
                                            </div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        <% } %>
                    </div> 
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="classesMenu" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg class-menu-lec" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h6 class="modal-title" id="exampleModalLabel">Class Menu</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true" style="color:white;">&times;</span>
                </button>
            </div>
    
            <div class="modal-body">
                <div class="container-fluid">
                    <div class="row" style="margin-top:20px;">
                        <div class="col-lg-6 col-md-6 featured-responsive c2">
                            <div class="featured-place-wrap">
                                <a href="#" onclick="addAssignment()">
                                    <div class="image">
                                        <img src="https://cdn-images-1.medium.com/max/1000/1*pQUTGu0kiDZEQxUslhhR2A.jpeg"  style="position: relative; top:-60px" class="img-fluid" alt="#">
                                    </div>
                                    <div class="featured-title-box inner-title"  style="height:35px;">
                                        <div style="margin:-50px">
                                            <h6 >Add Assignment Marks</h6>
                                            <ul>
                                                <li  style="margin-top:-10px"><span></span>
                                                    <p>Add a new assignment and add marks</p>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 featured-responsive c2">
                            <div class="featured-place-wrap">
                                <a href="#" onclick="addCourseContent()">
                                    <div class="image">
                                        <img src="https://itradeico.com/wp-content/uploads/2018/06/books-1024x535.png"  style="position: relative; top:-30px" class="img-fluid" alt="#">
                                    </div>
                                    <div class="featured-title-box inner-title" style="height:35px;">
                                        <div style="margin:-50px">
                                            <h6 >Add Course Content</h6>
                                            <ul>
                                                <li style="margin-top:-10px"><span></span>
                                                    <p>Add course related notes</p>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-6 featured-responsive c2">
                            <div class="featured-place-wrap">
                                <a href="#" onclick="viewResults()">
                                    <div class="image">
                                        <img src="https://t4.ftcdn.net/jpg/02/11/17/47/240_F_211174724_KySKzehbIX8TfHHY95TuwUmTVswFzp09.jpg"  style="position: relative; top:-45px" class="img-fluid" alt="#">
                                    </div>
                                    <div class="featured-title-box inner-title" style="height:35px;">
                                        <div style="margin:-50px">
                                            <h6 >View Results</h6>
                                            <ul>
                                                <li style="margin-top:-10px"><span></span>
                                                    <p>View an analysis of results</p>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 featured-responsive c2">
                            <div class="featured-place-wrap">
                                <a href="#" onclick="Forums()">
                                    <div class="image">
                                        <img src="http://static.guim.co.uk/sys-images/Guardian/Pix/pictures/2013/4/29/1367244760480/Some-unis-are-making-effo-007.jpg"  style="position: relative; top:-60px" class="img-fluid" alt="#">
                                    </div>
                                    <div class="featured-title-box inner-title" style="height:35px;">
                                        <div style="margin:-50px">
                                            <h6 >Discussion Forums</h6>
                                            <ul>
                                                <li style="margin-top:-10px"><span></span>
                                                    <p>Answer questions of your pupils</p>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
var myself = <%-JSON.stringify(myself)%>;
var today = new Date().getDay();
var days=[ "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]
var closest = myself[1]
var count=0
var minCount=8

myself.forEach(function(m){
    count=0
    for(var i=today; i<today+7; i++){
        if(m.day==days[i%7]){
            if(minCount>count){
                closest=m
                minCount=count+1
            }
           break
        }
        
        count++
    }
})

$("#cls").append(closest.subID+" "+closest.subname+" "+closest.year)
$("#hall").append(closest.hall)

function getTimeRemaining(endtime) {
  var t = Date.parse(endtime) - Date.parse(new Date());
  var seconds = Math.floor((t / 1000) % 60);
  var minutes = Math.floor((t / 1000 / 60) % 60);
  var hours = Math.floor((t / (1000 * 60 * 60)) % 24);
  var days = Math.floor(t / (1000 * 60 * 60 * 24));
  return {
    'total': t,
    'days': days,
    'hours': hours,
    'minutes': minutes,
    'seconds': seconds
  };
}

function initializeClock(id, endtime) {
  var clock = document.getElementById(id);
  var daysSpan = clock.querySelector('.days');
  var hoursSpan = clock.querySelector('.hours');
  var minutesSpan = clock.querySelector('.minutes');
  var secondsSpan = clock.querySelector('.seconds');

  function updateClock() {
    var t = getTimeRemaining(endtime);

    daysSpan.innerHTML = '0'+t.days;
    hoursSpan.innerHTML = ('0' + t.hours).slice(-2);
    minutesSpan.innerHTML = ('0' + t.minutes).slice(-2);
    secondsSpan.innerHTML = ('0' + t.seconds).slice(-2);

    if (t.total <= 0) {
      clearInterval(timeinterval);
    }
  }

  updateClock();
  var timeinterval = setInterval(updateClock, 1000);
}

var deadline = new Date(Date.parse(new Date()) + minCount * 30 * 60 * 60 * 1000);
initializeClock('clockdiv', deadline);
</script>
<% include ../partials/footer %>
